@startuml "Admin Activity - Edit Class"

title Admin Activity Diagram\\nEdit Data Kelas\\nE-Learning Coding Akademi Payakumbuh

|Admin|
start
:Login ke sistem;
:Buka menu "Kelola Kelas";
:Lihat daftar kelas;

|System|
:Tampilkan semua kelas;
note right
  Setiap kelas menampilkan:
  • Nama kelas
  • Guru pengajar
  • Jumlah siswa
  • Tombol aksi
end note

|Admin|
:Cari kelas yang akan diedit;
:Klik tombol "Edit" pada kelas;

|System|
:Load data kelas dari database;
:Load daftar guru untuk dropdown;
:Tampilkan form edit kelas;
note right
  Form sudah terisi dengan
  data kelas yang ada
end note

|Admin|
:Ubah data yang diperlukan;
note right
  **Data yang bisa diubah:**
  • Nama kelas
  • Deskripsi kelas
  • Guru pengajar
end note

if (Ganti guru pengajar?) then (Ya)
  :Pilih guru baru dari dropdown;
  note right
    **Perhatian:**
    Mengganti guru akan mempengaruhi:
    • Akses guru lama ke kelas
    • Akses guru baru ke kelas
  end note
else (Tidak)
  :Guru tetap sama;
endif

:Klik tombol "Update";

|System|
:Validasi input data;

if (Nama kelas kosong?) then (Ya)
  :Tampilkan error\\n"Nama kelas wajib diisi";
  |Admin|
  stop
else (Tidak)
  if (Guru belum dipilih?) then (Ya)
    :Tampilkan error\\n"Pilih guru pengajar";
    |Admin|
    stop
  else (Tidak)
    :Update data kelas di database;
    :Update guru_id jika diganti;
    :Set updated_at = timestamp;
    :Log aktivitas;
    note right
      **Activity Log:**
      • User: Admin
      • Action: Updated Class
      • Details: [nama kelas]
      • Changes: [field yang diubah]
      • Timestamp: [waktu]
    end note
    
    |Admin|
    :Tampilkan notifikasi sukses;
    note right
      "Data kelas berhasil diupdate!"
    end note
    :Redirect ke halaman daftar kelas;
    :Lihat perubahan data kelas;
  endif
endif

stop

@enduml
